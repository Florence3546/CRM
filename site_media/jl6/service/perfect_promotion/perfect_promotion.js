define("jl6/site_media/service/perfect_promotion/perfect_promotion",["require","jl6/site_media/plugins/artTemplate/template","jl6/site_media/widget/alert/alert","jl6/site_media/widget/ajax/ajax","jl6/site_media/plugins/store/store.min","jl6/site_media/widget/vaildata/vaildata"],function(e,a,n,t,i){"use strict";var o,l;o='<div class="modal fade">\n  <div class="modal-dialog">\n    <div class="modal-content w640">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title">填写推荐人</h4>\n      </div>\n      <div class="modal-body">\n        <div class="mb20">亲，是小伙伴推荐您购买的吗？填写小伙伴的店铺主旺旺，系统核实后，您和小伙伴都有惊喜哦！</div>\n        <form class="form-horizontal">\n          <div class="form-group">\n            <label for="receiver" class="col-sm-3 p0 control-label">小伙伴的店铺主旺旺</label>\n            <div class="col-sm-6 pr5 w250">\n              <input type="text" data-rule="require" class="form-control" name="guide_name">\n            </div>\n            <div class="col-sm-3 p0 red mt5 dn">*</div>\n          </div>\n          <div class="form-group">\n            <div class="col-sm-offset-3 col-sm-10">\n              <button type="submit" class="btn btn-primary">提交</button>\n              <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>\n              <label class="checkbox-inline ml20">\n                <input type="checkbox" value="option1">不再显示\n              </label>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n';var s=function(e){var s;i.get("perfect_promotion")||(s=a.compile(o)(e),l=$(s),$("body").append(l),l.find("form").vaildata({placement:"right",callBack:function(e){var a;a=$(e).find("[name=guide_name]").val(),t.ajax("receive_recount",{guide_name:a},function(e){n.show('恭喜您获得精灵赠送的<span class="red">'+e.point+"</span>个精灵币"),l.modal("hide")})}}),l.find("input[type=checkbox]").on("change",function(){this.checked?i.set("perfect_promotion",!0):i.clear("perfect_promotion")}),l.on("hidden.bs.modal",function(){l.remove()}),l.modal())};return{show:s}});