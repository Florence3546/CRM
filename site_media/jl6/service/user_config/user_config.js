define("jl6/site_media/service/user_config/user_config",["jl6/site_media/widget/ajax/ajax","jl6/site_media/widget/alert/alert","jl6/site_media/widget/confirm/confirm"],function(i,e,t){var n=function(){$(".edit_agent").click(function(){a(),$(this).addClass("active"),$("#id_select_agent option").length>0?(d(),$("#id_name").val($.trim($("#id_select_agent").find("option:selected").text())),$("#id_password").val(""),$("#id_repsd").val(""),$("#agent_id").val($("#id_select_agent").val()),$("#id_edit_box").fadeIn("fast"),$("#id_name").focus()):s($(this))}),$(".delete_agent").click(function(){a(),$(this).addClass("active");var n=$.trim($("#id_select_agent").find("option:selected").text());t.show({body:"确定删除您的代理用户["+n+"]吗？",okHide:function(){i.ajax("delete_agent",{agent_id:$("#id_select_agent").val()},function(){e.show({body:"代理用户删除成功",hidden:function(){window.location.reload()}})})}})}),$(".add_agent").click(function(){a(),$(this).addClass("active"),d(),$("#id_name").val(""),$("#id_password").val(""),$("#id_repsd").val(""),$("#agent_id").val(""),$("#id_edit_box").fadeIn("fast"),$("#id_name").focus()}),$(".show_msg").on("focus",function(){var i="#"+$(this).attr("id")+"_hint";$(i).removeClass("hide")}),$(".submit_agent").click(function(){function t(){d();var i=$("#id_name_hint"),e=$("#id_password_hint"),t=$("#id_repsd_hint");return""==a||null==a?(_(i,0,"*用户名不能为空"),!1):o(a,1)<5||o(a,1)>25?(_(i,0,"*代理用户名长度为"+o(a,1)+"，请"+(o(a,1)<5?"增加":"减少")+"字数"),!1):null==s||""==s?(_(e,0,"*密码不能为空"),!1):o(s,0)<6||o(s,0)>25?(_(e,0,"*密码长度为"+o(s,0)+"，请"+(o(s,0)<6?"增加":"减少")+"字数"),!1):s!=l?(_(t,0,"*两次输入的密码不一致"),!1):!0}function n(){if(""==c){for(var i=$("#id_select_agent option"),e=0;e<i.length;e++)if(a==$(i[e]).text())return d(),_(name_hint,0,"*用户名不能和已有用户相同"),!1;return!0}return!0}var a=$.trim($("#id_name").val()),s=$.trim($("#id_password").val()),l=$.trim($("#id_repsd").val()),c=$("#agent_id").val();t()&&n()&&i.ajax("submit_agent",{name:a,password:s,agent_id:c},function(i){e.show({body:i.msg,hidden:function(){window.location.reload()}})})}),$("#id_select_agent").on("change",function(){$("#id_name").val($("#id_select_agent").find("option:selected").text())})},a=function(){$("#id_select_agent").parent().find("a.btn").removeClass("active")},d=function(){name_hint=$("#id_name_hint"),name_hint.addClass("hide"),name_hint.text("用户名必须是淘宝网账号(5~25个字符)"),name_hint.css("color","#666"),psd_hint=$("#id_password_hint"),psd_hint.addClass("hide"),psd_hint.text("6~16个字符，建议使用字母加数字或符号的组合密码"),psd_hint.css("color","#666"),repsd_hint=$("#id_repsd_hint"),repsd_hint.addClass("hide"),repsd_hint.text("再输一次密码"),repsd_hint.css("color","#666")},s=function(i){a(),$(i).addClass("active"),d(),$("#id_name").val(""),$("#id_password").val(""),$("#id_repsd").val(""),$("#agent_id").val(""),$("#id_edit_box").fadeIn("fast"),$("#id_name").focus()},_=function(i,e,t){$(i).removeClass("hide"),$(i).css("color",e?"#4B4":"#F00"),$(i).text(t)},o=function(i,e){for(var t=0,n=0;n<i.length;n++)if(i[n].charCodeAt(0)<299)t++;else{if(1!=e)return-1;t+=2}return t};return{init:function(){n()}}});