;/*!/site_media/service/common/common.js*/
define("site_media/service/common/common",["require","site_media/plugins/sui/js/sui.min"],function(){var i=function(){},n={"-3":"请选择...","-2":"创意未投放","-1":"计划未投放",0:"首页左侧位置",1:"首页右侧第1",2:"首页右侧第2",3:"首页右侧第3",4:"首页（非前三）",5:"第2页",6:"第3页",7:"第4页",8:"第5页",9:"5页以后"},e=[{id:0,name:"首页左侧位置"},{id:1,name:"首页右侧第1"},{id:2,name:"首页右侧第2"},{id:3,name:"首页右侧第3"},{id:4,name:"首页（非前三）"},{id:5,name:"第2页"},{id:6,name:"第3页"},{id:7,name:"第4页"},{id:8,name:"第5页"},{id:9,name:"5页以后"}],m={"-3":"请选择...","-2":"创意未投放","-1":"计划未投放",0:"移动首条",1:"移动前三",2:"移动前三",3:"移动4~6条",4:"移动4~6条",5:"移动4~6条",6:"移动7~10条",7:"移动7~10条",8:"移动7~10条",9:"移动7~10条",10:"移动11~15条",11:"移动16~20条",12:"20条以后"},a=[{id:0,name:"移动首条"},{id:1,name:"移动前三"},{id:3,name:"移动4~6条"},{id:6,name:"移动7~10条"},{id:10,name:"移动11~15条"},{id:11,name:"移动16~20条"},{id:12,name:"20条以后"}];return{init:i,mobileRank:m,mobileRankList:a,pcRank:n,pcRankList:e}});
;/*!/site_media/service/keyword/keyword_list.js*/
define("site_media/service/keyword/keyword_list",["require","site_media/service/common/common","site_media/plugins/artTemplate/template","site_media/plugins/moment/moment.min","site_media/plugins/data-tables/dataTableExt","site_media/widget/ajax/ajax","site_media/widget/loading/loading","site_media/plugins/jquery.json-2.4.min"],function(e,a,t,r,i,s,n){"use strict";var c,o=r().subtract(7,"days").format("YYYY-MM-DD"),l=r().subtract(1,"days").format("YYYY-MM-DD"),d=[],_="",p=[],u=[],m=[],b=[],v={},f=function(a){_=a,$("#keyword_table tbody").on("get.rank","tr",function(e,a){var t=$(this).data("adgroup_id"),r=$(this).attr("id"),i=[r];s.ajax("batch_forecast_rt_rank",{keyword_list:i,adgroup_id:t},function(e){a&&a(e)})}),$("#keyword_table tbody").on("update.rank","tr",function(e,a,t){$(this).find(".pc_rank").text(a),$(this).find(".mobile_rank").text(t)}),$("#keyword_table tbody").on("update.rob_rank","tr",function(e,a,t,r){var i;$(this).data("locked",0),"nomal"==a&&(i='<a href="javascript:;" class="rob_set">抢</a>'),"fail"==a&&(i='<a href="javascript:;" class="rob_record">手动抢失败</a>&emsp;<a href="javascript:;" class="rob_set ml5">再抢</a>'),"success"==a&&("pc"==r?($(this).find(".max_price").text(t),$(this).find(".sort_max_price").text(t),$(this).find(".new_price").val(t),$(this).find(".new_price").data("old",t)):($(this).find(".max_mobile_price").text(t),$(this).find(".sort_max_mobile_price").text(t),$(this).find(".new_mobile_price").val(t),$(this).find(".new_mobile_price").data("old",t)),i='<a href="javascript:;" class="rob_record">手动抢成功</a>&emsp;<a href="javascript:;" class="rob_set ml5">再抢</a>'),"auto"==a&&($(this).data("locked",1),i='<a href="javascript:;" class="rob_record">已设为自动</a>&emsp;<a href="javascript:;" class="rob_set ml5">设置</a>'),"doing"==a&&(i='<a href="javascript:;" class="rob_doing">正在抢排名，请稍候</a>'),$(this).find(".rob_rank").html(i)}),$("#keyword_table tbody").on("get.rob_set","tr",function(a,t){var r=$(this),i={keywordId:r.attr("id"),adgroupId:r.data("adgroup_id"),word:r.find(".word").text(),maxPrice:Number(r.find(".max_price").text()),maxMobilePrice:Number(r.find(".max_mobile_price").text()),qscore:r.find(".qscore").attr("pc_qscore"),wirelessQscore:r.find(".qscore").attr("yd_qscore"),target:_};return i=$.extend({},i,t),e(["site_media/service/rob_rank/rob_rank"],function(e){e.show(i)}),!1}),$("#keyword_table tbody").on("delete_row","tr",function(){var e=$("#keyword_table tbody tr").index($(this));c.fnDeleteRow(e),$(this).remove(),$("#keywords_count").text(c.fnGetData().length)}),$("#keyword_table").on("click",".rank",function(){var e=$(this).closest("tr"),a=$("<img src=/site_media/qnpc6/static/images/small_ajax.gif>");$(this).replaceWith(a);var t=e.attr("id");e.trigger("get.rank",function(r){a.remove(),t in r.data?(e.find(".pc_rank").attr("colspan",1).text(r.data[t].pc_rank_desc),e.find(".mobile_rank").text(r.data[t].mobile_rank_desc).show()):(e.find(".pc_rank").attr("colspan",1).text("获取失败"),e.find(".mobile_rank").text("获取失败").show())})}),$("#keyword_table").on("click",".rob_record",function(){var a=$(this).closest("tr").attr("id");return e(["site_media/service/rob_rank/rob_record"],function(e){e.show({keywordId:a})}),!1}),$("#keyword_table").on("click",".rob_set",function(){var e=$(this).closest("tr"),a=$(this).closest("tr").attr("id");s.ajax("rob_config",{keyword_id:a},function(t){var r,i={},s=$("#keyword_table").data("saveOptions.rank"),n=t.rank_start_desc_map,c=t.rank_end_desc_map;if(t.data.platform){var o,l;o=n[t.data.platform][t.data.rank_start],l=c[t.data.platform][t.data.rank_end],i={method:"auto",keyword_id:a,platform:t.data.platform,rank_start:t.data.rank_start,rank_start_name:o,rank_end:t.data.rank_end,rank_end_name:l,limit:(t.data.limit/100).toFixed(2),nearly_success:t.data.nearly_success,start_time:t.data.start_time,end_time:t.data.end_time,rank_start_desc_map:n,rank_end_desc_map:c},r=$.extend({},i)}else i={method:"",limit:"",keyword_id:a,rank_start_desc_map:n,rank_end_desc_map:c},r=$.extend({},i,s);e.trigger("get.rob_set",r)})}),$("#keyword_table").on("click",".undo",function(){var e=$(this).prev();e.val(e.data("old")),e.change()}),$("#keyword_table").on("change",".edit_price",function(){var e=$(this).closest("tr"),a=e.attr("id"),t=e.data("adgroup_id"),r=e.data("campaign_id"),i=e.find(".new_price").val(),s=parseFloat(e.find(".new_price").data("old")).toFixed(2),n=e.find(".new_mobile_price").val(),c=parseFloat(e.find(".new_mobile_price").data("old")).toFixed(2);if(!w(i)||!w(n))return void $(this).val($(this).hasClass("new_price")?s:c);var o=parseFloat($(this).val()).toFixed(2);i=parseFloat(i).toFixed(2),n=parseFloat(n).toFixed(2),e.find(".new_price").val(i),e.find(".new_mobile_price").val(n),$(this).closest("td").find(".sort_price").text(o),v[a]={keyword_id:a,adgroup_id:t,campaign_id:r,word:e.find(".word").text(),max_price:s,new_price:i,is_del:0,match_scope:e.data("match"),mobile_old_price:c,max_mobile_price:n,mobile_is_default_price:e.data("mobile_match")},k(e),i>s?($.inArray(a,u)>-1&&u.splice($.inArray(a,u),1),-1==$.inArray(a,p)&&p.push(a)):s>i?($.inArray(a,p)>-1&&p.splice($.inArray(a,p),1),-1==$.inArray(a,u)&&u.push(a)):($.inArray(a,u)>-1&&u.splice($.inArray(a,u),1),$.inArray(a,p)>-1&&p.splice($.inArray(a,p),1)),n>c?($.inArray(a,b)>-1&&b.splice($.inArray(a,b),1),-1==$.inArray(a,m)&&m.push(a)):c>n?($.inArray(a,m)>-1&&m.splice($.inArray(a,m),1),-1==$.inArray(a,b)&&b.push(a)):($.inArray(a,b)>-1&&b.splice($.inArray(a,b),1),$.inArray(a,m)>-1&&m.splice($.inArray(a,m),1)),n!=c&&(v[a].mobile_is_default_price=0),n==c&&i==s&&$.inArray(a,v)>-1&&delete v[a],$("#pc_add_count").text(p.length),$("#pc_cut_count").text(u.length),$("#yd_add_count").text(m.length),$("#yd_cut_count").text(b.length)}),$("#keyword_table tbody").on("click",".forecast",function(){x($(this))}),$("#refresh_list").on("click.sync_max_price",function(){s.ajax("keyword_attr",{kw_id_list:d,attr_list:["max_price"]},function(e){for(var a in e.data)$("#"+a).find(".max_price").text((e.data[a].max_price/100).toFixed(2))})}),$("#keyword_table tbody").on("change",".forecast_select",function(){var e,a=$(this).closest("tr");if(-1!=this.value.indexOf("reason")){var t,r='<div tabindex="-1" role="dialog" class="sui-modal hide fade">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" data-dismiss="modal" aria-hidden="true" class="sui-close">×</button>\n                <h4 id="myModalLabel" class="modal-title">提示</h4>\n            </div>\n            <div class="modal-body">\n                   预估排名为0，<a target="_blank" href="https://bbs.taobao.com/catalog/thread/244117-318794824.htm?spm=0.0.0.0.PmcTbm">点击这里查看原因</a>\n            </div>\n            <div class="modal-footer">\n                <button type="button" data-dismiss="modal" class="sui-btn btn-default btn-large">关闭</button>\n            </div>\n        </div>\n    </div>\n</div>\n';return t=$(r),$("body").append(t),t.modal(),!1}e=Number(this.value.split("-")[0]),w(e)?(a.find(".new_price").val(e.toFixed(2)),a.find(".new_price").change()):a.find(".new_price").val(a.find(".new_price").data("old"))}),$("#keyword_table tbody").on("change",".forecast_fail",function(){"1"==$(this).val()&&x($(this))}),$("#submit_list").click(function(){var e=[];for(var a in v)e.push(v[a]);e.length>0&&(p.length>0||u.length>0||m.length>0||b.length>0)?$.confirm({title:"提示",closeBtn:!1,body:"PC: 加价"+p.length+"个，降价"+u.length+"个；<br>移动: 加价"+m.length+"个，降价"+b.length+"个。<br>您确定要提交吗？",okBtn:"确定",cancelBtn:"取消",height:"60px",backdrop:"static",keyboard:!1,okHide:function(){s.ajax("submit_keyword",{submit_list:$.toJSON(e)},function(e){var a=e.update_kw.length,t=e.failed_kw.length,r="修改成功:"+a+"个，失败:"+t+"个";$.alert({title:"提示",hasfoot:!1,body:r,height:20});for(var i in e.update_kw){var s=e.update_kw[i],n=v[s],c=$("#"+s);c.find(".sort_max_price").text(n.new_price),c.find(".new_price").data("old",n.new_price),c.find(".max_price").text(n.new_price),c.find(".sort_max_mobile_price").text(n.max_mobile_price),c.find(".new_mobile_price").data("old",n.max_mobile_price),c.find(".max_mobile_price").text(n.max_mobile_price)}for(var i in e.failed_kw){var s=e.failed_kw[i],c=$("#"+s);c.find(".new_price").val(c.find(".new_price").data("old")),c.find(".new_mobile_price").val(c.find(".new_mobile_price").data("old"))}$("#pc_add_count").text(0),$("#pc_cut_count").text(0),$("#yd_add_count").text(0),$("#yd_cut_count").text(0),v={},p=[],u=[],m=[],b=[]})}}):$.alert({title:"提示",hasfoot:!1,body:"没有修改任何关键词！",height:20})})},h=function(e,a){var t="rob_list";"core"==_&&(t="shop_core_list"),n.show("数据加载中，请稍候..."),s.ajax(t,{start_date:e,end_date:a},function(e){g(e),n.hide()})},g=function(e){var a,r;"rank"==_?r='{{if keywordList.length}}\n    {{each keywordList}}\n    <tr id="{{$value.keyword_id}}" data-adgroup_id="{{$value.adgroup_id}}" data-campaign_id="{{$value.campaign_id}}" data-match="{{$value.match_scope}}">\n        <td style="padding:2px; width:60px;" class="img_box">\n            <img  height="60" width="60" src="{{$value.pic_url}}_60x60.jpg_.webp" data-title="{{$value.title}}" data-camp-title="{{$value.camp_title}}" data-price="{{$value.price}}" data-pic-url="{{$value.pic_url}}"  data-locked="{{$value.is_locked}}"></a>\n        </td>\n        <td class="tl">\n            <span class="word">{{$value.word}}</span>\n            {{if $value.qscore_dict.wireless_matchflag == "2" || $value.qscore_dict.wireless_matchflag == "4"}}\n                <span class="iconfont show_tooltip"  data-placement="right" data-trigger="hover" data-title="移动首屏展示机会:有机会在手机淘宝网和淘宝客户端搜索结果中屏展示">&#xe605;</span>\n            {{/if}}\n            {{if $value.qscore_dict.pc_left_flag}}\n                <span class="iconfont show_tooltip" data-placement="right" data-trigger="hover" data-title="淘宝豆腐块展示机会:有机会在淘宝搜索关键词结果页左侧展示">&#xe606;</span>\n            {{/if}}\n        </td>\n        <td class="max_price">{{$value.max_price}}</td>\n        <td class="max_mobile_price">{{$value.max_mobile_price}}</td>\n        <td colspan="2" class="pc_rank">\n            <a class="rank w200" href="javascript:;">查</a>\n        </td>\n        <td style="display: none" class="mobile_rank"></td>\n        <td class="rob_rank">\n                <span class="dib w200 platform">\n                    <span class="platform_name w60">{{if $value.platform == \'pc\'}}计算机{{else}} 移动&emsp;{{/if}}</span>&nbsp;&nbsp;&nbsp;&nbsp;\n                    <span class="dib">限价<span class="limit_price">{{$value.limit_price}}</span>元</span>\n                </span>\n                <a href="javascript:;" class="rob_record">详情</a><br/>\n                <span class="dib w200 platform">\n                    <span class="exp_rank_start">{{$value.exp_rank_start_desc}}</span> - <span class="exp_rank_end">{{$value.exp_rank_end_desc}}</span>\n                </span>\n                <a href="javascript:;" class="rob_set">设置</a>\n        </td>\n        <td class="pc_qs">\n            <span class="pc_qs">{{$value.qscore_dict.qscore}}</span>\n        </td>\n        <td class="mobile_qs sort_custom qscore" pc_qscore="{{$value.qscore_dict.qscore}}" pc_creative_score="{{$value.qscore_dict.creativescore}}" pc_rele_score="{{$value.qscore_dict.kwscore}}" pc_cvr_score="{{$value.qscore_dict.cvrscore}}" yd_qscore="{{$value.qscore_dict.wireless_qscore}}" yd_creative_score="{{$value.qscore_dict.wireless_creativescore}}" yd_rele_score="{{$value.qscore_dict.wireless_relescore}}" yd_cvr_score="{{$value.qscore_dict.wireless_cvrscore}}" matchflag="{{$value.qscore_dict.wireless_matchflag}}" plflag="{{$value.qscore_dict.pc_left_flag}}">\n            {{if $value.qscore_dict.wireless_qscore >-1 }}\n                <span class="hide">{{$value.qscore_dict.wireless_qscore}}</span>\n                {{$value.qscore_dict.wireless_qscore}}\n            {{ else }}<span class="hide">0</span>--{{/if}}\n        </td>\n        <td class="striped">{{$value.impr}}</td>\n        <td class="striped">{{$value.click}}</td>\n        <td class="striped">{{$value.ctr}}%</td>\n        <td class="striped">{{$value.cost}}</td>\n        <td class="striped">{{$value.cpc}}</td>\n        <td>{{$value.conv}}%</td>\n        <td {{if $value.roi>1}}class="red"{{/if}}>{{$value.roi}}</td>\n    </tr>\n    {{/each}}\n{{/if}}\n':"core"==_&&(r='{{if keywordList.length}}\n    {{each keywordList}}\n    <tr id="{{$value.keyword_id}}" data-adgroup_id="{{$value.adgroup_id}}" data-campaign_id="{{$value.campaign_id}}" data-match="{{$value.match_scope}}" data-mobile_match="{{$value.mobile_is_default_price}}" >\n        <td style="padding:2px; width:60px;" class="img_box">\n            <img  height="60" width="60" src="{{$value.pic_url}}_60x60.jpg_.webp" data-title="{{$value.title}}" data-camp-title="{{$value.camp_title}}" data-price="{{$value.price}}" data-pic-url="{{$value.pic_url}}"></a>\n        </td>\n        <td class="tl">\n            <span class="word">{{$value.word}}</span>\n            {{if $value.qscore_dict.wireless_matchflag == "2" || $value.qscore_dict.wireless_matchflag == "4"}}\n                <span class="iconfont show_tooltip" data-placement="right" data-trigger="hover" data-title="移动首屏展示机会:有机会在手机淘宝网和淘宝客户端搜索结果中屏展示">&#xe605;</span>\n            {{/if}}\n            {{if $value.qscore_dict.pc_left_flag}}\n            <span class="iconfont show_tooltip" data-placement="right" data-trigger="hover" data-title="淘宝豆腐块展示机会:有机会在淘宝搜索关键词结果页左侧展示">&#xe606;</span>\n            {{/if}}\n        </td>\n        <td class="max_price">{{$value.max_price}}</td>\n        <td class="sort_custom">\n            <span class="hide sort_price sort_max_price">{{$value.max_price}}</span>\n            <form class="sui-form rank-form">\n                <input type="text" data-old="{{ $value.max_price }}" placeholder="{{$value.max_price}}" maxlength="5" value="{{$value.max_price}}" class="input-mini new_price edit_price">\n                <i class="iconfont undo">&#xe608;</i>\n            </form>\n        </td>\n        <td class="max_mobile_price">{{$value.max_mobile_price}}</td>\n        <td class="sort_custom">\n            <span class="hide sort_price sort_max_mobile_price">{{$value.max_mobile_price}}</span>\n            <form class="sui-form rank-form">\n                <input type="text" data-old="{{ $value.max_mobile_price }}" placeholder="{{$value.max_mobile_price}}" maxlength="5" value="{{$value.max_mobile_price}}" class="input-mini new_mobile_price edit_price">\n                <i class="iconfont undo">&#xe608;</i>\n            </form>\n        </td>\n        <td class="rob_rank">\n            {{if $value.is_locked}}\n                <a href="javascript:;" class="rob_record">已设为自动</a>&emsp;<a href="javascript:;" class="rob_set ml5">设置</a>\n            {{else}}\n                <a class="rob_set" href="javascript:;">抢</a>\n            {{/if}}\n        </td>\n        <td colspan="2" class="pc_rank">\n            <a class="rank" href="javascript:;">查</a>\n        </td>\n        <td style="display: none" class="mobile_rank"></td>\n        <td class="pc_qs">\n            <span class="pc_qs">{{$value.qscore_dict.qscore}}</span>\n        </td>\n        <td class="mobile_qs sort_custom qscore" pc_qscore="{{$value.qscore_dict.qscore}}" pc_creative_score="{{$value.qscore_dict.creativescore}}" pc_rele_score="{{$value.qscore_dict.kwscore}}" pc_cvr_score="{{$value.qscore_dict.cvrscore}}" yd_qscore="{{$value.qscore_dict.wireless_qscore}}" yd_creative_score="{{$value.qscore_dict.wireless_creativescore}}" yd_rele_score="{{$value.qscore_dict.wireless_relescore}}" yd_cvr_score="{{$value.qscore_dict.wireless_cvrscore}}" matchflag="{{$value.qscore_dict.wireless_matchflag}}" plflag="{{$value.qscore_dict.pc_left_flag}}">\n            {{if $value.qscore_dict.wireless_qscore >-1 }}\n                <span class="hide">{{$value.qscore_dict.wireless_qscore}}</span>\n                {{$value.qscore_dict.wireless_qscore}}\n            {{ else }}<span class="hide">0</span>--{{/if}}\n        </td>\n        <td class="striped">{{$value.impr}}</td>\n        <td class="striped">{{$value.click}}</td>\n        <td class="striped">{{$value.ctr}}%</td>\n        <td class="striped">{{$value.cost}}</td>\n        <td class="striped">{{$value.cpc}}</td>\n        <td>{{$value.conv}}%</td>\n        <td {{if $value.roi>1}}class="red"{{/if}}>{{$value.roi}}</td>\n    </tr>\n    {{/each}}\n{{/if}}\n'),a=t.compile(r)({keywordList:e.keyword_list}),c&&(c.fnClearTable(),c.fnDestroy());var i="暂无数据";e.msg&&(i=e.msg),$("#keywords_count").text(e.keyword_list.length),$("#keyword_table tbody").html(a);for(var s in e.keyword_list){var n=e.keyword_list[s];d.push(n.keyword_id)}c=$("#keyword_table").dataTable({bRetrieve:!0,bPaginate:!1,bDestroy:!0,bFilter:!0,bInfo:!1,bAutoWidth:!1,sDom:"",language:{emptyTable:"<div style='text-align:center'>"+i+"</div>"},aoColumns:S()}),$(".show_tooltip").tooltip()},w=function(e){return isNaN(e)||.05>e||e>99.99?!1:!0},x=function(e){var a,r,i,n,c=e.closest("tr"),o=c.attr("id");a='<select class="forecast_select" style="width: 120px">\n{{each data}}\n    {{if $value[1]==\'0.00\'}}\n    <option value="{{$value[1]}}" >无左推资格</option>\n    {{else}}\n    <option value="{{$value[1]}}" >{{$value[0]}}</option>\n    {{/if}}\n{{/each}}\n    <option value="reason">预估为0：了解原因</option>\n</select>\n',r='<select class="forecast_fail">\n    <option value="0" selected="selected">{{errMsg}}</option>\n    <option value="1">重新预估</option>\n</select>\n',n=$("<img src=/site_media/qnpc6/static/images/small_ajax.gif>"),e.replaceWith(n),s.ajax("forecast_rank",{keyword_id:o},function(e){if($.isArray(e.data)&&e.data.length>0)i=9999==e.data[99]?t.compile(r)({errMsg:"出价到99.99元也无法获得排名"}):t.compile(a)({data:y(e.data)});else{var s=e.data.length>0?e.data:"淘宝返回预估排名数据为空";i=t.compile(r)({errMsg:s})}n.replaceWith(i),k(c)})},y=function(e){for(var a,t,r,i,s,n=[],c=[],o=[],l=[],d=[],_=17,p=0;p<Math.ceil(e.length/_);p++){a=p+1,c=e.slice(p*_,(p+1)*_),s=a>1?"第"+a+"页":"",3>a?(o=c.slice(0,4),l=c.slice(4,12),d=c.slice(12,17)):(o=[],l=c.slice(0,12),d=c.slice(12,17));for(var u in o)t=(o[u]/100).toFixed(2),n.push([s+"第"+(Number(u)+1)+"名："+t+"元",t]);if(l.length>0){var m=o.length+1,b=o.length+l.length;1==l.length?(t=(l[0]/100).toFixed(2),n.push([s+"第"+m+"名："+t+"元",t])):(r=(l[0]/100).toFixed(2),i=(l[l.length-1]/100).toFixed(2),n.push([s+"第"+m+"~"+b+"名："+r+"~"+i+"元",r+"-"+i]))}d.length>0&&(1==d.length?(t=(d[0]/100).toFixed(2),n.push(["第"+a+"页底部："+t+"元",t])):(r=(d[0]/100).toFixed(2),i=(d[d.length-1]/100).toFixed(2),n.push(["第"+a+"页底部："+r+"~"+i+"元",r+"-"+i])))}return n.push([e.length+"名以后："+(i-.01).toFixed(2)+"元",(i-.01).toFixed(2)]),n},k=function(e){var a=e.find(".forecast_select");if(0!=a.length){var t=e.find(".new_price").val(),r=null;a.find("option").each(function(){var e=Number(this.value.split("-").slice(-1)[0]);return e&&t>=e?(r=this.value,!1):void 0}),r||(r=a.find("option:last").prev().val()),a.val(r)}},q=function(e,a){o=e,l=a},S=function(){return"rank"==_?[{bSortable:!1},{bSortable:!0},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!1},{bSortable:!1},{bSortable:!0},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0}]:[{bSortable:!1},{bSortable:!0},{bSortable:!0},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!1},{bSortable:!1},{bSortable:!1},{bSortable:!0},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0},{bSortable:!0}]};return{init:f,setQueryDate:q,getKeywordList:h}});
;/*!/site_media/service/auto_rob_rank/auto_rob_rank.js*/
define("site_media/service/auto_rob_rank/auto_rob_rank",["require","site_media/plugins/artTemplate/template","site_media/service/keyword/keyword_list","site_media/plugins/moment/moment.min"],function(t,e,a,r){var i=r().subtract(7,"days").format("YYYY-MM-DD"),s=r().subtract(1,"days").format("YYYY-MM-DD"),n=function(){"False"==$("#version_limit").val()&&(a.init("rank"),a.getKeywordList(i,s)),$("#refresh_list").click(function(){a.getKeywordList(i,s)});var t=Number($("#select_date").val());$("#select_date").change(function(){var e=Number($(this).val());t!=e&&(t=e,0==e?(i=r().subtract(0,"days").format("YYYY-MM-DD"),s=r().subtract(0,"days").format("YYYY-MM-DD")):(i=r().subtract(e,"days").format("YYYY-MM-DD"),s=r().subtract(1,"days").format("YYYY-MM-DD")),a.getKeywordList(i,s))})};return{init:function(){n()}}});
;/*!/site_media/service/rob_rank/real_time.js*/
define("site_media/service/rob_rank/real_time",["site_media/plugins/artTemplate/template","site_media/widget/ajax/ajax","site_media/plugins/moment/moment.min","site_media/plugins/highcharts/highcharts"],function(i,t,e){"use strict";var a,n='<div style="width: 600px; margin-left: -300px; left:50%;" tabindex="-1" role="dialog" data-hasfoot="false" class="sui-modal hide fade"  id="real_time">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" data-dismiss="modal" aria-hidden="true" class="sui-close">×</button>\n                <h4 class="modal-title">“{{word}}”抢排名趋势，<span class="finished_status">正在抢......，请勿关闭窗口</span></h4>\n            </div>\n            <div class="modal-body">\n                <table class="main_info">\n                    <tr>\n                        <td><span class="img">&emsp;</span>{{if platform == \'pc\'}}计算机{{else}}移动{{/if}}出价：<span class="price">--</span>&ensp;元</td>\n                        <td class="msg">&emsp;</td>\n                        <td>\n                            <div class="show_model">\n                                <a class="active" data-type="rob_chat"><i class="iconfont b">&#xe60d;</i></a>\n                                <a data-type="rob_sub_info"><i class="iconfont b">&#xe60e;</i></a>\n                            </div>\n                        </td>\n                    </tr>\n                </table>\n                <div id="rob_chat" class="mt10" style="min-width:300px;height:240px"></div>\n                <div class="sub_info hide" id="rob_sub_info">\n                    <ol>\n                    </ol>\n                </div>\n                <div class="gray f12" style="margin-top:10px;">\n                    当前设置：{{if method == \'manual\'}}手动{{else}}自动{{/if}}，{{if platform == \'pc\'}}计算机{{else}}移动{{/if}}，{{rank_start_name}}~{{rank_end_name}}\n                </div>\n                <div class="red f12 mt5 hide" id="rob_tips">设置抢排名成功，正在测试</div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="sui-btn btn-bordered btn-xlarge btn-primary reset">重新设置</button>\n                <button type="button" class="sui-btn btn-xlarge btn-primary submit" data-dismiss="modal">关闭</button>\n            </div>\n        </div>\n    </div>\n</div>\n',s=function(t){var e,a,s=!1;e=i.compile(n)(t),a=$(e),$("body").append(a),a.modal({backdrop:"static"}),"auto"==t.method&&a.find("#rob_tips").removeClass("hide"),a.on("shown.bs.modal",function(){var i=this;r(t),c(),$(this).find(".reset").on("click",function(){s=!0,$(i).modal("hide")})}),a.on("hidden.bs.modal",function(){s&&$("#"+t.keywordId).trigger("get.rob_set",[t]),$(this).remove(),l()}),a.find(".show_model a").on("click",function(){var i=$(this).data().type;a.find(".show_model a").removeClass("active"),$(this).addClass("active"),$("#rob_chat,#rob_sub_info").addClass("hide"),$("#"+i).removeClass("hide")})},r=function(i){var t,e;t="ws://"+window.location.host+"/websocket/?keyword_id="+i.keywordId,e=new WebSocket(t),e.onmessage=function(t){if(""!=t&&void 0!=t){if("ready"==t.data)return d(i),!1;var a=$.evalJSON(t.data);o(i,a,e)}}},d=function(i){t.ajax("manual_rob_rank",{keyword_id:i.keywordId,adgroup_id:i.adgroupId,exp_rank_start:i.rank_start,exp_rank_end:i.rank_end,limit_price:parseInt(100*i.limit+.5),platform:i.platform,nearly_success:i.nearly_success},function(i){if(""!=i.limitError){var t,e;"version_limit"==i.limitError&&(t="Sorry!当前版本不支持",e='亲，您订购的版本不支持手动抢排名哦，请升级到双引擎版！&emsp;&emsp;<a href="/web/upgrade_suggest/" target="_blank">立即升级</a></div></div>'),"others"==i.limitError&&(t="Sorry，自动抢排名失败",e="亲，请刷新页面重试"),$.alert({title:t,closeBtn:!1,body:e,okBtn:"知道了",height:"60px",backdrop:"static",keyboard:!1})}})},o=function(i,t,a){var n=$("#real_time"),s=$("#"+i.keywordId),r="doing";("ok"==t.result_flag||"nearly_ok"==t.result_flag)&&(n.find(".main_info").addClass("success"),n.find(".finished_status").text("抢排名成功"),n.find("#rob_tips").text("设置抢排名成功：系统将在您 指定的时间段内每隔15~30分钟自动为关键词抢排名"),s.trigger("update.rank",[t.cur_rank_dict.pc,t.cur_rank_dict.yd,t.cur_rank_dict.pc_desc,t.cur_rank_dict.yd_desc]),"rank"!=i.target&&s.trigger("update.rob_rank",["success",Number(t.price).toFixed(2),t.platform]),r="finish",a.close()),("done"==t.result_flag||"failed"==t.result_flag)&&(n.find(".main_info").addClass("fail"),n.find(".finished_status").text("抢排名失败"),n.find("#rob_tips").text("测试抢排名失败：建议你重新设置提高限价"),s.trigger("update.rank",[t.cur_rank_dict.pc,t.cur_rank_dict.yd,t.cur_rank_dict.pc_desc,t.cur_rank_dict.yd_desc]),"rank"!=i.target&&s.trigger("update.rob_rank",["fail"]),r="finish",a.close()),c(t),n.find("ol").append("<li class='"+r+"''><span>"+e(t.rob_time).format("H:mm:ss")+"<span class='r'>"+Number(t.price).toFixed(2)+"元</span></span><span>"+t.msg+"</span></li>"),n.find(".main_info .price").text(Number(t.price).toFixed(2)),n.find(".main_info .msg").text(t.msg)},l=function(){a=void 0},c=function(i){if(a){var t={y:Number(i.price),data:i.msg};("ok"==i.result_flag||"nearly_ok"==i.result_flag)&&(t.marker={fillColor:"#1ede20",states:{hover:{fillColor:"#1ede20",lineColor:"#1ede20"}}}),("done"==i.result_flag||"failed"==i.result_flag)&&(t.marker={fillColor:"#fd5726",states:{hover:{fillColor:"#fd5726",lineColor:"#fd5726"}}}),$("#rob_chat").highcharts().series[0].addPoint(t),$("#rob_chat").highcharts().series[1].addPoint({y:i.cur_rank_dict.pc,data:i.msg})}else a=$("#rob_chat").highcharts({chart:{type:"spline"},title:{text:""},subtitle:{text:""},legend:{enabled:!0},credits:{text:""},xAxis:{type:"linear",minTickInterval:1,formatter:function(){return this.value+1}},yAxis:[{title:{text:""},min:0,gridLineColor:"#ddd",gridLineDashStyle:"Dash",gridLineWidth:1},{title:{text:""},opposite:!0,min:0,gridLineColor:"#ddd",gridLineDashStyle:"Dash",gridLineWidth:1,labels:{formatter:function(){return""}}}],plotOptions:{spline:{marker:{radius:4,lineColor:"#666666",lineWidth:1}}},series:[{name:"出价",lineColor:"#76a0c6",marker:{lineWidth:0,width:8,height:8,symbol:"circle",fillColor:"#1a8bf1"}},{name:"排名",yAxis:1,lineColor:"#ccc",marker:{lineWidth:0,width:8,height:8,symbol:"circle",fillColor:"#aaa"}}],tooltip:{crosshairs:!0,shared:!0,formatter:function(){return"当前出价:"+this.y.toFixed(2)+"<br/>"+this.points[0].point.data}}})};return{show:s}});
;/*!/site_media/service/rob_rank/rob_rank.js*/
define("site_media/service/rob_rank/rob_rank",["site_media/plugins/artTemplate/template","site_media/plugins/jslider/js/jquery.slider","site_media/widget/jqueryExt/serializeObject","site_media/widget/ajax/ajax","site_media/service/rob_rank/real_time"],function(e,n,a,t,i){"use strict";var r,s,d,l='<div style="width: 600px; margin-left: -300px; left:50%;" tabindex="-1" role="dialog" data-hasfoot="false" class="sui-modal hide fade" id="rob_rank">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4>"{{word}}"抢排名设置</h4>\n            </div>\n            <div class="modal-body" style="overflow: initial">\n                <form class="sui-form" style="margin-top:10px;">\n                    <div>\n                        抢位方式：\n                        <input type="radio" name="method" value="manual" {{if method=="manual"}}checked{{/if}}>手动&emsp;\n                        <input type="radio" name="method" value="auto" {{if method=="auto"}}checked{{/if}} style="margin-left: 30px;">自动\n                        <span class="text-muted ml20 manual_info hide">(手动抢排名时，请不要刷新界面)</span>\n                        <div class="slider" style="width: 200px;margin-left: 20px;vertical-align: 2px; display: none">\n                            <input type="text" value="{{if start_time!=undefined }}{{start_time}}{{else}}480{{/if}};{{if end_time!=undefined }}{{end_time}}{{else}}1024{{/if}}">\n                        </div>\n                    </div>\n                    <div class="mt15">\n                        抢位平台：\n                        <input type="radio" name="platform" value="pc" {{if platform=="pc"}}checked{{/if}}/>计算机\n                        <span class="ml20">\n                          （当前出价：{{maxPrice}}元，{{qscore}}分，<span class="pc_rank">{{pc_rank_desc}}</span>）\n                        </span>\n                    </div>\n                    <div class="mt15">\n                        抢位平台：\n                        <input type="radio" name="platform" value="yd" {{if platform=="yd"}}checked{{/if}}/>移动\n                          <span class="ml20">\n                              （当前出价：{{maxMobilePrice}}元，{{if wirelessQscore>0 }}{{wirelessQscore}}分{{/if}}，<span class="yd_rank">{{ydRank}}</span>）\n                          </span>\n                    </div>\n                    <div class="mt15">\n                        期望排名：\n                        <span class="sui-dropdown dropdown-bordered select">\n                            <span class="dropdown-inner">\n                                <a role="button" data-toggle="dropdown" href="javascript:void(0);" class="dropdown-toggle">\n                                    <input value="{{rank_start}}" id="rank_start" name="rank_start" type="hidden" class="rank_value"><span class="rank_name">{{rank_start_name}}</span><i class="iconfont fr">&#xe603;</i>\n                                </a>\n                                <ul role="menu" aria-labelledby="drop1" class="sui-dropdown-menu rank_item_start">\n                                </ul>\n                            </span>\n                        </span>&ensp;至&ensp;\n                            <span class="sui-dropdown dropdown-bordered select">\n                            <span class="dropdown-inner">\n                                <a role="button" data-toggle="dropdown" href="javascript:void(0);" class="dropdown-toggle">\n                                    <input value="{{rank_end}}"  id="rank_end" name="rank_end" type="hidden" class="rank_value"><span class="rank_name">{{rank_end_name}}</span><i class="iconfont fr">&#xe603;</i>\n                                </a>\n                                <ul role="menu" aria-labelledby="drop1" class="sui-dropdown-menu rank_item_end">\n                                </ul>\n                            </span>\n                        </span>\n                        <!--<input type="text" autocomplete="off" name="rank_start" maxlength="3" class="input-mini" value="{{rank_start}}">\n                        <input type="text" autocomplete="off" name="rank_end" maxlength="3" class="input-mini" value="{{rank_end}}">&ensp;名-->\n                    </div>\n                    <div class="mt15">\n                        最高限价：\n                        <input type="text" autocomplete="off" maxlength="5" name="limit" class="input-mini" value="{{limit}}">&ensp;元\n                    </div>\n                    <div class="mt15">\n                        抢位失败：\n                        <input type="radio" name="nearly_success" {{if nearly_success=="1"|| nearly_success == undefined }}checked{{/if}} value="1">接近期望排名时保留出价\n                        <input type="radio" name="nearly_success" {{if nearly_success=="0"}}checked{{/if}} value="0" style="margin-left: 20px;">恢复为原价\n                    </div>\n                </form>\n                <div class="red mt15">免责声明：抢位可能导致花费过高，如因抢排名导致效果不佳，与精灵无关</div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="sui-btn btn-bordered btn-xlarge btn-primary" data-dismiss="modal">取消</button>\n                {{if method == "auto"}}\n                    <button type="button" class="sui-btn btn-bordered btn-xlarge btn-primary rob_cancle">取消自动抢</button>\n                {{/if}}\n                <button type="button" class="sui-btn btn-xlarge btn-primary submit">确定</button>\n            </div>\n        </div>\n    </div>\n</div>\n',o='{{each list}}\r\n<li role="presentation"><a role="menuitem" value="{{$value.id}}" tabindex="-1" href="#">{{$value.name}}</a></li>\r\n{{/each}}',m=function(n){var a,t;n.start_time&&isNaN(n.start_time)&&(n.start_time=k(n.start_time)),n.end_time&&isNaN(n.end_time)&&(n.end_time=k(n.end_time)),a=e.compile(l)(n),t=$(a),$("body").append(t),t.modal({backdrop:"static",keyboard:!1}),c(n.platform,n.rank_start_desc_map),p(n.platform,n.rank_end_desc_map),u(t,n),t.modal("show"),t.on("hidden.bs.modal",function(){_(t,n)}),$("#"+n.keywordId).trigger("get.rank",[function(e){n.keyword_id in e.data?(t.find(".pc_rank").text(e.data[n.keyword_id].pc_rank_desc),t.find(".yd_rank").text(e.data[n.keyword_id].mobile_rank_desc).show()):(t.find(".pc_rank").text("获取失败"),t.find(".yd_rank").text("获取失败")),e.data[n.keyword_id].mobile_rank_desc.indexOf("未投放")>=0&&($("input[value=pc]").find("input[value=pc]").attr("checked"),$("input[value=yd]").attr("disabled",!0))}]),$(".rank_item_start li").each(function(){var e=$(this).find("a").attr("value");e==$("#rank_start").val()?$(this).addClass("active"):$(this).removeClass("active")}),$(".rank_item_end li").each(function(){var e=$(this).find("a").attr("value");e==$("#rank_end").val()?$(this).addClass("active"):$(this).removeClass("active")})},c=function(n,a){var t=[];d=a[n];for(var i in d)t.push({id:i,name:d[i]});s=e.compile(o)({list:t}),$(".rank_item_start").html(s)},p=function(n,a){var t=[];d=a[n];for(var i in d)t.push({id:i,name:d[i]});s=e.compile(o)({list:t}),$(".rank_item_end").html(s)},u=function(e,n){var a=e;$(a).find(".slider input").slider({skin:"plastic",from:0,to:1440,step:60,calculate:function(e){return f(e)}}),$(a).find(".slider").removeClass("vh").addClass("hide"),$(a).find("input[name=method]").on("change",function(){var e=$(a).find(".manual_info"),n=$(a).find(".slider");"auto"==this.value?(n.css("display","inline-block"),e.addClass("hide")):(n.css("display","none"),e.removeClass("hide"))}),n.method&&$(a).find("input[name=method]").trigger("change"),$(a).on("change","input[name=platform]",function(){$(".platform_info",a).addClass("hide"),"pc"==this.value&&n.qscore<=5&&$(".platform_info",a).removeClass("hide").find("span").text("PC端"),"yd"==this.value&&n.wirelessQscore<=5&&$(".platform_info",a).removeClass("hide").find("span").text("移动端"),c(this.value,n.rank_start_desc_map),p(this.value,n.rank_end_desc_map),$(".rank_value").val("-3"),$(".rank_name").text("请选择...")}),$(a).on("click",".submit",function(){var e,i="";if(e=$(a).find("form").serializeObject(),e.method||(i+="请选择抢位方式</br>"),e.platform||(i+="请选择抢位平台</br>"),("-3"==e.rank_end||-3==e.rank_start||Number(e.rank_end)<Number(e.rank_start))&&(i+="请正确选择期望排名,后面排名大于或等于前面排名</br>"),(!e.limit||isNaN(e.limit)||Number(e.limit)<.05||Number(e.limit)>99.99)&&(i+="请正确填写最高限价,限价必须是0.05到99.99的数字</br>"),e.nearly_success||(i+="请选择抢位不成功出价设置"),""!=i)return $.alert({title:"错误",closeBtn:!1,body:i,okBtn:"确定",height:"60px",backdrop:"static",keyboard:!1}),!1;if("auto"==e.method){var s,d;return s=f(Number($("#rob_rank").find(".slider input").val().split(";")[0])),d=f(Number($("#rob_rank").find(".slider input").val().split(";")[1])),t.ajax("auto_rob_rank",{keyword_id:n.keywordId,exp_rank_start:e.rank_start,exp_rank_end:e.rank_end,limit_price:parseInt(100*e.limit+.5),platform:e.platform,start_time:s,end_time:d,nearly_success:e.nearly_success},function(e){if(""!=e.limitError){var n,t;"version_limit"==e.limitError&&(n="Sorry!当前版本不支持",t='亲，您订购的版本不支持自动抢排名哦，请升级到八引擎版吧！&emsp;&emsp;<a href="/web/upgrade_suggest/" target="_blank">立即升级</a></div></div>'),"nums_limit"==e.limitError&&(n="Sorry，自动抢排名关键词个数已达上限",t="亲，自动抢位的关键词已达到50个上限！"),"others"==e.limitError&&(n="Sorry，自动抢排名失败",t="亲，请刷新页面重试"),$.alert({title:n,closeBtn:!1,body:t,okBtn:"知道了",height:"60px",backdrop:"static",keyboard:!1})}else r=!0,$(a).modal("hide")}),!1}r=!0,$(a).modal("hide")}),$(a).on("click",".rob_cancle",function(){var e=$("#"+n.keywordId);$.confirm({title:"提示",closeBtn:!1,body:"您确定取消“"+n.word+"”的自动抢排名吗？",okBtn:"确定",cancelBtn:"取消",height:"60px",backdrop:"static",keyboard:!1,okHide:function(){t.ajax("rob_cancle",{keyword_id:n.keywordId},function(){"rank"==n.target?e.trigger("delete_row",[n.keywordId]):e.trigger("update.rob_rank",["nomal"]),r=!1,$(a).modal("hide")})}})})},_=function(e,n){if(r){var a=e.find("form").serializeObject(),t=$("#"+n.keywordId);n.rank_start_name=e.find("#rank_start").next(".rank_name").html(),n.rank_end_name=e.find("#rank_end").next(".rank_name").html(),i.show($.extend({},n,a)),"auto"==a.method&&("rank"==n.target?(t.find(".platform_name").text("pc"==a.platform?"计算机":"移动　"),t.find(".exp_rank_start").text(d[a.rank_start]),t.find(".exp_rank_end").text(d[a.rank_end]),t.find(".limit_price").text(Number(a.limit).toFixed(2))):t.trigger("update.rob_rank",["auto",a.platform])),$("#keyword_table").data("saveOptions.rank",$.extend({},n,a))}r=!1,$(e).remove()},f=function(e){var n=Math.floor(e/60),a=e-60*n;return(10>n?"0"+n:n)+":"+(0==a?"00":a)},k=function(e){return 60*Number(e.split(":")[0])+Number(e.split(":")[1])};return{show:m}});
;/*!/site_media/service/rob_rank/rob_record.js*/
define("site_media/service/rob_rank/rob_record",["site_media/plugins/artTemplate/template","site_media/widget/ajax/ajax","site_media/plugins/moment/moment.min","site_media/plugins/highcharts/highcharts"],function(t,e,i){"use strict";var a,a='<div id="rob_record"  style="width: 600px; margin-left: -300px; left:50%;" tabindex="-1" role="dialog" data-hasfoot="false" class="sui-modal hide fade drawer">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" data-dismiss="modal" aria-hidden="true" class="sui-close">×</button>\n                <h4 class="modal-title">抢排名记录</h4>\n                <div class="btn-group show_model mr10">\n                    <a class="btn btn-sm active" data-type="char_info"><i class="iconfont b">&#xe60d;</i></a>\n                    <a class="btn btn-sm" data-type="table_info"><i class="iconfont b">&#xe60e;</i></a>\n                </div>                       \n            </div>\n            <div class="modal-body" style=" max-height: 400px; overflow-y: scroll">\n                <div class="drawer_body">\n                    <div style="text-align:right;margin-top:10px;">\n                        <div class="show_model">\n                            <a class="active" data-type="sign_char"><i class="iconfont b">&#xe60d;</i></a>\n                            <a data-type="sign_table"><i class="iconfont b">&#xe60e;</i></a>\n                        </div>\n                    </div>\n                    <div id="sign_char" style="height:280px;"></div>\n                    <div id="sign_table" class="hide" style="height:260px;overflow-y: scroll;margin:10px;">\n                        <table class="sui-table table-bordered">\n                            <thead>\n                                <tr>\n                                    <th>优化时间</th>\n                                    <th>出价</th>\n                                    <th>排名情况</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td colspan="3" class="tc">\n                                        正在获取，请稍后。。。\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div style="padding:0 10px;">\n                        <span>当前设置：<span class="setting">--</span></span>\n                        <button class="sui-btn btn-xlarge btn-primary fr close_drawer" type="button">返回</button>\n                    </div>\n                </div>\n                <div id="char_info" style="height:340px;"></div>\n                <div id="table_info" class="hide">\n                    <table class="sui-table table-bordered">\n                        <thead>\n                            <tr>\n                                <th>优化时间</th>\n                                <th>出价</th>\n                                <th>排名情况</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td colspan="3" class="tc">\n                                    正在获取，请稍后。。。\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>                    \n                </div>                \n            </div>\n        </div>\n    </div>\n</div>\n',n=function(i){var n,d;n=t.compile(a)(i),d=$(n),$("body").append(d),d.modal({backdrop:"static"}),d.on("shown.bs.modal",function(){e.ajax("rob_record",{keyword_id:i.keywordId},function(t){s(t,i)})}),d.on("hidden.bs.modal",function(){$(this).remove()}),d.find(".show_model .btn").on("click",function(){var t=$(this).data().type;d.find(".show_model .btn").removeClass("active"),$(this).addClass("active"),$("#char_info,#table_info").addClass("hide"),$("#"+t).removeClass("hide")}),d.find(".close_drawer").on("click",function(){d.find(".drawer_body").removeClass("active")})},s=function(t,e){var a=[],n=[],s=[];if(t.data[e.keywordId].length)for(var d in t.data[e.keywordId].reverse()){var r=$.evalJSON(t.data[e.keywordId][d]);n.push(r),"ok"!=r.result_flag&&"nearly_ok"!=r.result_flag?"done"!=r.result_flag&&"failed"!=r.result_flag?s.push("<tr><td>"+r.rob_time+"</td><td>"+Number(r.price).toFixed(2)+"</td><td>"+r.msg+"</td></tr>"):(a.push({flag:"fail",time:r.rob_time,price:r.price,data:n,platform:r.platform,limit_price:r.limit_price,exp_rank_range:r.exp_rank_range,nearly_success:r.nearly_success,msg:n.length>1?n.reverse()[1].msg:n[0].msg}),n=[],s.push("<tr><td>"+r.rob_time+"</td><td>"+Number(r.price).toFixed(2)+'</td><td><img src="/site_media/qnpc6/static/images/fail.png?t=1484904941079"/>'+r.msg+"</td></tr>")):(a.push({flag:"ok",time:r.rob_time,price:r.price,data:n,msg:r.msg,platform:r.platform,limit_price:r.limit_price,exp_rank_range:r.exp_rank_range,nearly_success:r.nearly_success}),n=[],s.push("<tr><td>"+r.rob_time+"</td><td>"+Number(r.price).toFixed(2)+'</td><td><img src="/site_media/qnpc6/static/images/success.png?t=1484904941079"/>'+r.msg+"</td></tr>"))}$("#char_info").highcharts({chart:{type:"spline"},title:{text:""},subtitle:{text:""},credits:{text:""},legend:{enabled:!1},xAxis:{categories:a.slice(-18).map(function(t){return i(t.time).format("MM-D H:mm")})},yAxis:[{title:{text:"出价(元)"},min:0,gridLineColor:"#ddd",gridLineDashStyle:"Dash",gridLineWidth:1}],plotOptions:{spline:{marker:{radius:4,lineColor:"#666666",lineWidth:1}}},series:[{cursor:"pointer",name:"出价",lineColor:"#76a0c6",data:a.slice(-18).map(function(t){var e;return e="ok"==t.flag?"/site_media/qnpc6/static/images/success.png?t=1484904941079":"/site_media/qnpc6/static/images/fail.png?t=1484904941079",{y:t.price,events:{click:function(){return!1}},marker:{symbol:"url("+e+")",width:20,height:20},data:t}})}],tooltip:{formatter:function(){var t=this.point.data;return"当前出价:"+this.y.toFixed(2)+"元<br/>平台:"+("yd"==t.platform?"移动":"PC")+"   限价:"+t.limit_price+"元<br/>期望排名:"+t.exp_rank_range[0]+"~"+t.exp_rank_range[1]+"<br/>"+t.msg}}}),$("#table_info").find("tbody").html(s.reverse().join())};return{show:n}});
;/*!/site_media/service/auto_rob_rank/data.js*/
define("site_media/service/auto_rob_rank/data",["require"],function(){var e=[{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01}];return{data:e}});
;/*!/site_media/service/common/topEvent.js*/
define("site_media/service/common/topEvent",["site_media/widget/ajax/ajax","site_media/widget/loading/loading"],function(i,t){var a=function(){$(".open_qnpc_feedback_dialog").click(function(){$("#feedback_modal_dialog").modal("show")}),$("#sync_increase_data").click(function(){t.show("正在下载全店数据，请稍候..."),i.ajax("sync_data",{},function(){t.hide(),$.confirm({title:"提示",body:"数据下载成功，即将刷新页面",okBtn:"确定",cancelBtn:"取消",okHide:function(){window.location.reload()}})})}),$("#submit_suggest").click(function(){var a=$("#id_content").val();a&&""!=a.trim()?($("#feedback_modal_dialog").modal("hide"),t.show("请稍候..."),i.ajax("add_suggest",{suggest:a.trim()},function(){t.hide(),$.alert({title:"精灵提醒",body:"提交成功，感谢您的参与！我们会及时处理您的意见！",hasfoot:!1})})):$.alert({title:"精灵提醒",body:"亲!还未输入反馈内容!",hasfoot:!1})})};return{init:a}});
;/*!/site_media/service/qnpc_home/account_detail.js*/
define("site_media/service/qnpc_home/account_detail",["require","site_media/plugins/artTemplate/template","site_media/plugins/moment/moment.min","site_media/plugins/data-tables/dataTableExt","site_media/widget/ajax/ajax"],function(t,e,a,s,o){var u,m=a().subtract(7,"days").format("YYYY-MM-DD"),d=a().subtract(1,"days").format("YYYY-MM-DD"),n=!1,i=function(){n=!0,l(m,d),$("#selectDetailDate").change(function(){var t=Number($(this).val());0==t?(m=a().subtract(0,"days").format("YYYY-MM-DD"),d=a().subtract(0,"days").format("YYYY-MM-DD")):(m=a().subtract(t,"days").format("YYYY-MM-DD"),d=a().subtract(1,"days").format("YYYY-MM-DD")),l(m,d)})},l=function(t,e){o.ajax("get_rpt_detail",{start_date:t,end_date:e},function(t){r(t)})},r=function(t){u&&(u.fnClearTable(),u.fnDestroy());var a,s='{{each list}}\n<tr data-id="{{$value.campaign_id}}"  id="{{$value.campaign_id}}" mnt_type="{{$value.mnt_type}}" mnt_index="{{$value.mnt_index}}" {{if $value.online_status=="offline"}}class="gray_light"{{/if}}>\n    <td>{{$value.date}}</td>\n    <td>{{$value.summed.impr}}</td>\n    <td>{{$value.summed.click}}</td>\n    <td>{{$value.summed.ctr}}%</td>\n    <td>{{$value.summed.cost}}</td>\n    <td>{{$value.summed.cpc}}</td>\n    <td>{{$value.summed.favcount}}</td>\n    <td>{{$value.summed.paycount}}</td>\n    <td>{{$value.summed.conv}}%</td>\n    <td>{{$value.summed.pay}}</td>\n    <td>{{$value.summed.roi}}</td>\n</tr>\n{{/each}}\n';a=e.compile(s)({list:t.data.rpt_list}),$("#detail_table tbody").html(a),u=$("#detail_table").dataTable({bRetrieve:!0,bPaginate:!1,bDestroy:!0,bFilter:!0,bInfo:!1,bAutoWidth:!1,sDom:"",language:{emptyTable:"<div style='text-align:center'>暂无数据</div>"},aoColumns:[{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!1}]})};return{init:function(){i()},hasInit:function(){return n}}});
;/*!/site_media/service/qnpc_home/campaign_list.js*/
define("site_media/service/qnpc_home/campaign_list",["require","site_media/plugins/artTemplate/template","site_media/plugins/moment/moment.min","site_media/plugins/data-tables/dataTableExt","site_media/widget/ajax/ajax","site_media/widget/loading/loading"],function(t,e,a,n,s,i){"use strict";var o,l=function(t,e){p(t,e),u()},c=function(){var t=[];return $("#campaign_table .check_column input").each(function(){$(this).prop("checked")&&t.push($(this).val())}),t},p=function(t,e){i.show("数据加载中,请稍候..."),s.ajax("campaign_list",{start_date:t,end_date:e},function(t){m(t),i.hide()})},u=function(){$("#campaign_table tbody").on("click",".edit_budget",function(){var e,a,n;a=$(this).closest("tr").data("id"),e=$(this).data("budget"),n=$(this).data("smooth");var i=$(this).closest("tr").attr("mnt_type");t(["site_media/service/qnpc_home/edit_camp_budget"],function(t){t.show({campaign_id:a,budget:e,is_smooth:n,mnt_type:parseInt(i),onChange:function(t,i){if(t!=e||i!=n){var o;o="0"==i?"false":"true",s.ajax("set_budget",{camp_id:a,use_smooth:o,budget:t},function(e){var a=$("#"+e.json_result_data.camp_id).find(".edit_budget"),n=a.prev();n.text(2e7>t?t+"元":"不限"),a.data("budget",t),a.data("smooth",i),$.alert({title:"提示",body:"修改成功！",okBtn:"确定",height:"30px"})})}}})})}),$(".choose_column").change(function(){$(".check_column [type=checkbox]").prop("checked",$(this).prop("checked"))}),$("#campaign_table").change(".check_column [type=checkbox]",function(){$(".check_column [type=checkbox]:checked").length==$("#campaign_table tbody tr").length?$(".choose_column").prop("checked",!0):$(".choose_column").prop("checked",!1)}),$("#campaign_table").on("click",".set_online_status",function(){var t=$(this).closest("tr"),e=$(this).attr("opt"),a=t.data("id");d(e,[a])})},d=function(t,e){var a=new Array;for(var n in e){var i=$("#campaign_table").find("#"+e[n]);i.find(".set_online_status").attr("opt")==t&&a.push(e[n])}s.ajax("set_online_status",{mode:t,camp_id_list:a},function(t){r(t)})},r=function(t){var e=t.success_camp_ids;for(var a in e){var n=$("#campaign_table").find("#"+e[a]);1==t.mode?(n.removeClass("gray_light"),n.find(".set_online_status").attr("opt","0"),n.find(".set_online_status").prev("span").text("推广中"),n.find(".set_online_status").text("暂停")):(n.addClass("gray_light"),n.find(".set_online_status").attr("opt","1"),n.find(".set_online_status").prev("span").text("已暂停"),n.find(".set_online_status").text("开启"))}$.alert({title:"提示",body:"操作成功！",okBtn:"确定",height:"30px"})},m=function(t){o&&(o.fnClearTable(),o.fnDestroy());var a,n='{{each list}}\n<tr data-id="{{$value.campaign_id}}"  id="{{$value.campaign_id}}" mnt_type="{{$value.mnt_type}}" mnt_index="{{$value.mnt_index}}" {{if $value.online_status=="offline"}}class="gray_light"{{/if}}>\n    <td class="check_column" style="border-left: none; text-align: center"><input type="checkbox" value="{{$value.campaign_id}}"></td>\n    <td class="tl">\n      <span class="title">{{$value.title}}</span><br>\n      {{ if $value.mnt_type == 0 }}\n          <span class="sui-label label-">手动</span>\n      {{ else }}\n          <span class="sui-label label-info">\n          {{ if $value.mnt_type == 1}} 长尾\n          {{else if $value.mnt_type == 2}} 重点\n          {{else if $value.mnt_type == 3}} ROI\n          {{else if $value.mnt_type == 4}} 无线\n          {{/if}}\n          </span>\n      {{/if}}\n\n      <span class="ml10">({{$value.adg_num}}个宝贝)</span>\n    </td>\n    <td>\n      <span class="budget">\n          <span class="hidden">{{$value.budget}}</span>\n        {{if $value.budget==20000000}}\n          不限\n        {{else}}\n          {{$value.budget}}元\n        {{/if}}\n      </span>\n      <i class="iconfont edit_budget hover_show" data-budget="{{$value.budget}}" data-smooth="{{$value.is_smooth}}">&#xe604;</i>\n    </td>\n    <td><span class="hide">{{$value.impr}}</span>{{$value.impr}}</td>\n    <td><span class="hide">{{$value.click}}</span>{{$value.click}}</td>\n    <td><span class="hide">{{$value.ctr}}</span>{{$value.ctr}}%</td>\n    <td><span class="hide">{{$value.cost}}</span>￥{{$value.cost}}</td>\n    <td><span class="hide">{{$value.cpc}}</span>￥{{$value.cpc}}</td>\n    <td><span class="hide">{{$value.favcount}}</span>{{$value.favcount}}</td>\n    <td><span class="hide">{{$value.paycount}}</span>{{$value.paycount}}</td>\n    <td><span class="hide">{{$value.conv}}</span>{{$value.conv}}%</td>\n    <td><span class="hide">{{$value.pay}}</span>￥{{$value.pay}}</td>\n    <td><span class="hide">{{$value.roi}}</span>{{$value.roi}}</td>\n    <td>\n\n        <span class="b">\n        {{if $value.online_status=="offline"}}\n        <span>已暂停</span>&emsp;<a href="javascript:;" opt="1" class="hover_show set_online_status">开启</a>\n        {{else}}\n        <span>推广中</span>&emsp;<a href="javascript:;" opt="0" class="hover_show set_online_status">暂停</a>\n        {{/if}}\n        </span>\n        {{ if $value.error_descr }}\n        <br/>{{ $value.error_descr }}\n        {{ /if }}\n    </td>\n</tr>\n{{/each}}\n';a=e.compile(n)({list:t.json_campaign_list}),$("#campaign_table tbody").html(a),o=$("#campaign_table").dataTable({bRetrieve:!0,bPaginate:!1,bDestroy:!0,bFilter:!0,bInfo:!1,bAutoWidth:!1,sDom:"",language:{emptyTable:"<div style='text-align:center'>暂无数据</div>"},aoColumns:[{bSortable:!1},{bSortable:!1},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!0,sType:"custom",sSortDataType:"custom-text"},{bSortable:!1}]})};return{init:l,getCampaignList:p,getCampaignIdList:c,updateCampStatus:d}});
;/*!/site_media/service/qnpc_home/edit_camp_budget.js*/
define("site_media/service/qnpc_home/edit_camp_budget",["site_media/plugins/artTemplate/template"],function(e){"use strict";var t;t='<div id="editBudgetModal" tabindex="-1" role="dialog" data-hasfoot="false" class="sui-modal hide fade">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" data-dismiss="modal" aria-hidden="true" class="sui-close">×</button>\r\n                <h4 class="modal-title">修改计划日限额</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form class="sui-form">\r\n                    <label class="n">\r\n                        <input type="radio" name="is_limit" {{ if budget==20000000}}checked{{/if}} value="unlimit">&ensp;不设置日限额\r\n                    </label>\r\n                    <br/>\r\n                    <label class="n">\r\n                        <input type="radio" name="is_limit" {{ if budget!=20000000}}checked{{/if}} value="limit">&ensp;设置日限额&ensp;\r\n                        <input class="input-small" name="budget" type="text"\r\n                               value="{{ if budget!=20000000}}{{ budget }}{{ else }}300{{/if}}"\r\n                               {{ if budget==20000000}}disabled\r\n                                {{/if}}>&ensp;元&ensp;<span class="g9">(范围为{{ budget_min }}~{{ budget_max }}元)</span>\r\n                    </label>\r\n                    <br/>\r\n\r\n                    <div style="margin-left:2em;" class="{{ if budget==20000000}}dn{{/if}}">\r\n                        <label class="n">\r\n                            <input type="radio" name="is_smooth" {{ if is_smooth == \'0\'}}checked{{/if}} value=0>&ensp;标准投放\r\n                        </label>\r\n                        <br/>\r\n                        <label class="n">\r\n                            <input type="radio" name="is_smooth" {{ if is_smooth == \'1\'}}checked{{/if}} value=1>&ensp;智能均匀投放\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" data-ok="modal" class="sui-btn btn-primary btn-large">确定</button>\r\n                <button type="button" data-dismiss="modal" class="sui-btn btn-default btn-large">取消</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';var d=[[30,3e3],[30,1e4],[30,99999]],i=function(i){var a,n=i.mnt_type,l=d[2];l=1==n||3==n?d[0]:2==n||4==n?d[1]:d[2],i.budget_min=l[0],i.budget_max=l[1],a=e.compile(t)(i),$("body").append($(a)),$("#editBudgetModal").modal({backdrop:"static",keyboard:!1}),$("#editBudgetModal").modal("show"),$("#editBudgetModal .btn-primary").on("click",function(){var e,t,d,a;return t=$("#editBudgetModal").find("[name=is_limit]:checked").val(),e="unlimit"==t?2e7:Number($("#editBudgetModal").find("[name=budget]").val()),d=$("#editBudgetModal").find("[name=is_smooth]:checked").val(),isNaN(e)||parseInt(e)!=e?a="日限额只能为整数!":e<l[0]?a="日限额不能低于"+l[0]+"元!":"limit"==t&&e>l[1]&&(a="日限额不能高于"+l[1]+"元!"),a?($.alert({title:"提示",body:a,okBtn:"确定",height:"30px"}),!1):($("#editBudgetModal").modal("hide"),void i.onChange(e,d))}),$("#editBudgetModal").find("[name=is_limit]").on("change",function(){"unlimit"==$(this).val()?($("#editBudgetModal").find("[name=is_smooth]").closest("label").hide(),$("#editBudgetModal").find("[name=budget]").attr("disabled","disabled")):($("#editBudgetModal").find("[name=is_smooth]").closest("label").show(),$("#editBudgetModal").find("[name=budget]").removeAttr("disabled"))}),$("#editBudgetModal").on("hidden",function(){$("#editBudgetModal").remove()})};return{show:i}});
;/*!/site_media/service/qnpc_home/data.js*/
define("site_media/service/qnpc_home/data",["require"],function(){var t=[{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"},{campaign_id:12345678,mnt_type:2,mnt_index:1,title:"开车精灵长尾托管--计划1",adg_num:59,budget:300,is_smooth:1,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,favcount:23,paycount:10,conv:"2.5",pay:442.5,roi:2.01,online_status:"offline",error_descr:"达到日限额"}];return{data:t}});
;/*!/site_media/service/qnpc_home/qnpc_home.js*/
define("site_media/service/qnpc_home/qnpc_home",["require","site_media/plugins/highcharts/highcharts","site_media/plugins/artTemplate/template","site_media/widget/chart/chart","site_media/service/qnpc_home/campaign_list","site_media/plugins/moment/moment.min","site_media/service/qnpc_home/account_detail","site_media/widget/ajax/ajax","site_media/widget/loading/loading"],function(t,a,n,d,i,r,e,o){function c(t){var a=/^((\+?86)|(\(\+86\)))?(13[0-9]|15[012356789]|17[78]|18[0-9]|14[57])[0-9]{8}$/;return a.test(t)?!0:!1}var s=r().subtract(7,"days").format("YYYY-MM-DD"),l=r().subtract(1,"days").format("YYYY-MM-DD"),u=function(){m(s,l),p(s,l),i.init(s,l),$(".opt-mnt").click(function(){var t=i.getCampaignIdList();if(t.length<=0)return void $.alert({title:"注意",body:"请先选择计划!",okBtn:"确定",height:"60px"});var a="",n=$(this).data("opt");a="1"==n?"确定要推广选中的计划吗?":"确定要将选中的计划暂停推广吗?",$.confirm({title:"提示",body:a,okBtn:"确定",cancelBtn:"取消",okHide:function(){i.updateCampStatus(n,t)}})}),$("#show_detail").click(function(){$("#accountDetailModal").modal("show"),e.hasInit()||e.init()}),$("#select_date").change(function(){var t=Number($(this).val());0==t?(s=r().subtract(0,"days").format("YYYY-MM-DD"),l=r().subtract(0,"days").format("YYYY-MM-DD")):(s=r().subtract(t,"days").format("YYYY-MM-DD"),l=r().subtract(1,"days").format("YYYY-MM-DD")),m(s,l),i.getCampaignList(s,l)}),$("#get_phone_modal")&&($("#inputPhone").tooltip({placement:"right",title:"请输入正确的手机号",trigger:"manual"}),$("#inputPhone").focus(function(){$("#inputPhone").tooltip("hide")}),$("#submit_phone").on("click",function(){var t=$("#inputPhone").val(),a=$("#inputQQ").val();c(t)?o.ajax("submit_userinfo",{phone:t,qq:a},function(){$("#get_phone_modal").modal("hide"),$.alert({title:"提示",body:"提交成功!",okBtn:"确定",height:"60px"})}):$("#inputPhone").tooltip("show")}),$("#get_phone_modal").modal({backdrop:!0,keyboard:!1,okHide:function(){}}),$("#get_phone_modal").modal("show"))},m=function(t,a){o.ajax("account",{start_date:t,end_date:a},function(t){h(t)})},h=function(t){var a,d,i;a='<tr>\r\n    <td rowspan="4" class="none-td">　　</td>\r\n    <td>总花费　</td>\r\n    <td>展现量　</td>\r\n    <td>点击量　</td>\r\n    <td>点击率　</td>\r\n    <td>PPC</td>\r\n    <td>购物车总数</td>\r\n</tr>\r\n<tr class="data">\r\n    <td class="b">￥{{ cost }}</td>\r\n    <td>{{ impr }}</td>\r\n    <td>{{ click }}</td>\r\n    <td>{{ ctr }}%</td>\r\n    <td>{{ cpc }}</td>\r\n    <td>{{ carttotal }}</td>\r\n</tr>\r\n<tr>\r\n    <td>成交额</td>\r\n    <td>收藏量</td>\r\n    <td>成交量</td>\r\n    <td>转化率</td>\r\n    <td>ROI</td>\r\n    <td>成交客单价</td>\r\n</tr>\r\n<tr class="data">\r\n    <td class="b">￥{{ pay }}</td>\r\n    <td>{{ favcount }}</td>\r\n    <td>{{ paycount }}</td>\r\n    <td>{{ conv }}%</td>\r\n    <td>{{ roi }}</td>\r\n    <td>{{ avg_pay }}</td>\r\n</tr>\r\n',i=$(".total_rpt"),d=n.compile(a)(t.account_data_dict),i.html(d)},p=function(){o.ajax("show_chart",{start_date:s,end_date:l},function(t){t.chart_data&&d.draw("account_chart",t.chart_data.category_list,t.chart_data.series_cfg_list)})};return{init:function(){u()}}});
;/*!/site_media/service/shop_core/data.js*/
define("site_media/service/shop_core/data",["require"],function(){var e=[{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",mobile_rank:100,pc_rank:101,qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101},{id:248218490588,adgroup_id:626514512,campaign_id:12345678,item_id:35153353253,img_url:"https://img.alicdn.com/bao/uploaded/i1/19631029192533731/T1MrLZFdVXXXXXXXXX_!!0-item_pic.jpg",max_price:3.28,new_price:1.58,word:"毛衣女衫",qscore_dict:{wireless_matchflag:2,pc_left_flag:1,qscore:8,creativescore:8,kwscore:7,wireless_qscore:9,wireless_creativescore:7,wireless_relescore:8,wireless_cvrscore:7},platform:"pc",exp_rank_start:3,exp_rank_end:7,limit_price:3.13,impr:1e4,click:200,ctr:"2.00",cost:221,cpc:1.1,conv:"2.5",roi:2.01,mobile_rank:100,pc_rank:101}];return{data:e}});
;/*!/site_media/service/shop_core/shop_core.js*/
define("site_media/service/shop_core/shop_core",["require","site_media/plugins/artTemplate/template","site_media/service/keyword/keyword_list","site_media/plugins/moment/moment.min","site_media/widget/ajax/ajax"],function(e,t,a,i,s){var r=i().subtract(7,"days").format("YYYY-MM-DD"),o=i().subtract(1,"days").format("YYYY-MM-DD"),d=function(){"False"==$("#version_limit").val()&&s.ajax("calc_shop_core",{},function(e){if("ok"==e.condition)$(".func").removeClass("hide"),$(".submit-div").removeClass("hide"),a.init("core"),a.getKeywordList(r,o);else{var t='<td colspan="19"><div class="text-center"><span>正在分析核心词，请稍后再来查看或手动刷新该页面（第一次使用时需要下载大量数据，平均每100个宝贝约需要等待6分钟）</span></div></td>';$("#keyword_table tbody tr").html(t)}});var e=Number($("#select_date").val());$("#select_date").change(function(){var t=Number($(this).val());e!=t&&(e=t,0==t?(r=i().subtract(0,"days").format("YYYY-MM-DD"),o=i().subtract(0,"days").format("YYYY-MM-DD")):(r=i().subtract(t,"days").format("YYYY-MM-DD"),o=i().subtract(1,"days").format("YYYY-MM-DD")),a.getKeywordList(r,o))})};return{init:function(){d()}}});
;/*!/site_media/service/waiting/waiting.js*/
define("site_media/service/waiting/waiting",["site_media/plugins/jquery/jquery.min","site_media/widget/ajax/ajax","site_media/plugins/owlcarousel/owl.carousel.min"],function(e,i){function a(i){"undefined"!=typeof i.redicrect&&(window.location.href=i.redicrect),"undefined"!=typeof i.finished&&(i.finished?e("#download_progress").animate({width:"100%"},100,function(){e("#download_progress").text("100%"),window.location.href="/qnpc/qnpc_home"}):(e("#download_progress").animate({width:i.progress+"%"},100),e("#download_progress").text(i.progress+"%")))}var n=function(){e("#owl-carousel").owlCarousel({items:1,autoPlay:!0,itemsDesktop:!1}),setInterval(function(){i.ajax("is_data_ready",{},a)},5e3),i.ajax("is_data_ready",{},a)};return{init:n}});